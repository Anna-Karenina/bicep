{"openapi":"3.0.0","paths":{"/api/v1/auth/email/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthEmailLoginDto"}}}},"responses":{"201":{"description":"return user not trainer or student.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}},"tags":["Auth"]}},"/api/v1/auth/email/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRegisterLoginDto"}}}},"responses":{"204":{"description":"Create un active user and send confirmation email"}},"tags":["Auth"]}},"/api/v1/auth/email/confirm":{"post":{"operationId":"AuthController_confirmEmail","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthConfirmEmailDto"}}}},"responses":{"204":{"description":""}},"tags":["Auth"]}},"/api/v1/auth/forgot/password":{"post":{"operationId":"AuthController_forgotPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthForgotPasswordDto"}}}},"responses":{"204":{"description":""}},"tags":["Auth"]}},"/api/v1/auth/reset/password":{"post":{"operationId":"AuthController_resetPassword","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResetPasswordDto"}}}},"responses":{"204":{"description":""}},"tags":["Auth"]}},"/api/v1/auth/me":{"get":{"operationId":"AuthController_me","parameters":[],"responses":{"200":{"description":""}},"tags":["Auth"],"security":[{"bearer":[]}]},"patch":{"operationId":"AuthController_update","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthUpdateDto"}}}},"responses":{"200":{"description":""}},"tags":["Auth"],"security":[{"bearer":[]}]}},"/api/v1/auth/refresh":{"post":{"operationId":"AuthController_refresh","parameters":[],"responses":{"200":{"description":""}},"tags":["Auth"],"security":[{"bearer":[]}]}},"/api/v1/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[],"responses":{"204":{"description":""}},"tags":["Auth"],"security":[{"bearer":[]}]}},"/api/v1/files/upload":{"post":{"operationId":"FilesS3Controller_uploadFile","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}}}}}},"responses":{"201":{"description":""}},"tags":["Files"],"security":[{"bearer":[]}]}},"/api/v1/trainer":{"post":{"operationId":"TrainerController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTrainerDto"}}}},"responses":{"201":{"description":"Return new trainer","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trainer"}}}}},"tags":["Trainer"],"security":[{"bearer":[]}]},"get":{"operationId":"TrainerController_findAll","parameters":[{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"filters","required":false,"in":"query","schema":{"type":"string"}},{"name":"sort","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"201":{"description":"Returns infinity list trainers exercises","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InfinityPaginationResponseTrainer"}}}}},"tags":["Trainer"],"security":[{"bearer":[]}]}},"/api/v1/trainer/{id}":{"get":{"operationId":"TrainerController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"returns trainer by id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trainer"}}}}},"tags":["Trainer"],"security":[{"bearer":[]}]},"patch":{"operationId":"TrainerController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTrainerDto"}}}},"responses":{"201":{"description":"Return the trainer instanse","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Trainer"}}}}},"tags":["Trainer"],"security":[{"bearer":[]}]},"delete":{"operationId":"TrainerController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Trainer"],"security":[{"bearer":[]}]}},"/api/v1/student":{"post":{"operationId":"StudentController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateStudentDto"}}}},"responses":{"201":{"description":"Return new student","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Student"}}}}},"tags":["Student"],"security":[{"bearer":[]}]},"get":{"operationId":"StudentController_findAll","parameters":[{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"filters","required":false,"in":"query","schema":{"type":"string"}},{"name":"sort","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"201":{"description":"The record has been successfully created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InfinityPaginationResponseStudent"}}}}},"tags":["Student"],"security":[{"bearer":[]}]}},"/api/v1/student/{id}":{"get":{"operationId":"StudentController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"returns student by id.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Student"}}}}},"tags":["Student"],"security":[{"bearer":[]}]},"patch":{"operationId":"StudentController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStudentDto"}}}},"responses":{"200":{"description":""}},"tags":["Student"],"security":[{"bearer":[]}]},"delete":{"operationId":"StudentController_remove","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Student"],"security":[{"bearer":[]}]}},"/api/v1/gym":{"post":{"operationId":"GymController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateGymDto"}}}},"responses":{"201":{"description":"The record has been successfully created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Gym"}}}}},"tags":["Gym"],"security":[{"bearer":[]}]}},"/api/v1/gym/attach-user-to-gym":{"post":{"operationId":"GymController_attachUserToGym","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttachUserToGymDto"}}}},"responses":{"204":{"description":""}},"tags":["Gym"],"security":[{"bearer":[]}]}},"/api/v1/gym/{id}":{"get":{"operationId":"GymController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Gym"],"security":[{"bearer":[]}]}},"/api/v1/workout":{"post":{"operationId":"WorkoutController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateWorkoutDto"}}}},"responses":{"201":{"description":"The record has been successfully created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Workout"}}}}},"tags":["Workout"],"security":[{"bearer":[]}]}},"/api/v1/workout/by-id/{id}":{"get":{"operationId":"WorkoutController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Workout"],"security":[{"bearer":[]}]}},"/api/v1/workout/by-trainer/{id}":{"get":{"operationId":"WorkoutController_findWorkoutByTrainer","parameters":[{"name":"trainerId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Workout"],"security":[{"bearer":[]}]}},"/api/v1/workout/my":{"get":{"operationId":"WorkoutController_my","parameters":[],"responses":{"201":{"description":"The record has been successfully created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Workout"}}}}},"tags":["Workout"],"security":[{"bearer":[]},{"bearer":[]}]}},"/api/v1/exercise":{"post":{"operationId":"ExerciseController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateExerciseDto"}}}},"responses":{"201":{"description":"Return new exercise","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Exercise"}}}}},"tags":["Exercise"]},"get":{"operationId":"ExerciseController_findAll","parameters":[{"name":"page","required":false,"in":"query","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"type":"number"}},{"name":"filters","required":false,"in":"query","schema":{"type":"string"}},{"name":"sort","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"201":{"description":"Returns infinity list if exercises","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InfinityPaginationResponseExercise"}}}}},"tags":["Exercise"]}},"/api/v1/exercise/{id}":{"get":{"operationId":"ExerciseController_findOne","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":"The record has been successfully created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Exercise"}}}}},"tags":["Exercise"]}},"/api/v1/exercise/muscle-groups":{"get":{"operationId":"ExerciseController_findExerciseGroups","parameters":[],"responses":{"200":{"description":""}},"tags":["Exercise"]}},"/api/v1/exercise/attach-video":{"post":{"operationId":"ExerciseController_attachExerciseVideo","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttachVideoDto"}}}},"responses":{"default":{"description":"Returns exercise with video link","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Exercise"}}}}},"tags":["Exercise"]}},"/api/v1/exercise-step":{"post":{"operationId":"ExerciseStepController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateExerciseStepDto"}}}},"responses":{"201":{"description":"The record has been successfully created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExerciseStep"}}}}},"tags":["ExerciseStep"]}},"/api/v1/auth/google/login":{"post":{"operationId":"AuthGoogleController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthGoogleLoginDto"}}}},"responses":{"200":{"description":""}},"tags":["Auth"]}}},"info":{"title":"API","description":"API docs","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"AuthEmailLoginDto":{"type":"object","properties":{"email":{"type":"string","example":"test1@example.com"},"password":{"type":"string"}},"required":["email","password"]},"FileType":{"type":"object","properties":{"id":{"type":"string","example":"cbcfa8b8-3a25-4adb-a9c6-e325f0d0f3ae"}},"required":["id"]},"RoleDto":{"type":"object","properties":{"id":{"type":"number"}},"required":["id"]},"Gym":{"type":"object","properties":{"id":{"type":"object","example":1},"schedule":{"example":["10","20"],"type":"array","items":{"type":"string"}},"address":{"type":"string","example":"Moscow, Tverskaya 1"},"phone":{"type":"string","example":"79516623438"}},"required":["id","schedule","address","phone"]},"StatusDto":{"type":"object","properties":{"id":{"type":"number"}},"required":["id"]},"User":{"type":"object","properties":{"id":{"type":"object","example":"1"},"email":{"type":"string","example":"bad@apple.com"},"password":{"type":"string","example":"secret"},"previousPassword":{"type":"string","example":"oldsecret"},"provider":{"type":"string","example":"1","description":"how user entered"},"socialId":{"type":"string","example":"1","description":"for google, apple auth"},"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"photo":{"example":"1","allOf":[{"$ref":"#/components/schemas/FileType"}]},"role":{"$ref":"#/components/schemas/RoleDto"},"gyms":{"type":"array","items":{"$ref":"#/components/schemas/Gym"}},"status":{"$ref":"#/components/schemas/StatusDto"},"phone":{"type":"string","example":"79516623438"},"oneSignalId":{"type":"string","example":"token","description":"onesignal userid from mobile app"}},"required":["id","email","password","previousPassword","provider","socialId","firstName","lastName","photo","role","gyms","status","phone","oneSignalId"]},"LoginResponse":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"},"token":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9","description":"access token"},"refreshToken":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9","description":"ref token"},"tokenExpires":{"type":"number","example":"1729338362500","description":"token expire timestamp"}},"required":["user","token","refreshToken","tokenExpires"]},"AuthRegisterLoginDto":{"type":"object","properties":{"email":{"type":"string","example":"test1@example.com"},"password":{"type":"string"},"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"}},"required":["email","password","firstName","lastName"]},"AuthConfirmEmailDto":{"type":"object","properties":{"hash":{"type":"string"}},"required":["hash"]},"AuthForgotPasswordDto":{"type":"object","properties":{"email":{"type":"string"}},"required":["email"]},"AuthResetPasswordDto":{"type":"object","properties":{"password":{"type":"string"},"hash":{"type":"string"}},"required":["password","hash"]},"AuthUpdateDto":{"type":"object","properties":{"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"password":{"type":"string"},"oldPassword":{"type":"string"}},"required":["firstName","lastName","password","oldPassword"]},"FileDto":{"type":"object","properties":{"id":{"type":"string"}},"required":["id"]},"CreateTrainerDto":{"type":"object","properties":{"email":{"type":"string","example":"test1@example.com"},"password":{"type":"string"},"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"photo":{"$ref":"#/components/schemas/FileDto"},"specilizes":{"type":"string","example":"Fintess"},"experience":{"type":"number","example":"12","description":"in mouths"}},"required":["email","password","firstName","lastName","photo","specilizes","experience"]},"Trainer":{"type":"object","properties":{"id":{"type":"object","example":"1"},"user":{"$ref":"#/components/schemas/User"},"specilizes":{"type":"string","example":"Fitnes"},"experience":{"type":"number","example":12,"description":"In mouth"}},"required":["id","user","specilizes","experience"]},"InfinityPaginationResponseTrainer":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Trainer"}},"hasNextPage":{"type":"boolean","example":false}},"required":["data","hasNextPage"]},"UpdateTrainerDto":{"type":"object","properties":{"specilizes":{"type":"string","example":"Fintess"},"experience":{"type":"number","example":"12","description":"in mouths"},"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"oneSignalId":{"type":"string","example":"token","description":"one signal userid from mobile app"}},"required":["specilizes","experience","firstName","lastName","oneSignalId"]},"CreateStudentDto":{"type":"object","properties":{"email":{"type":"string","example":"test1@example.com"},"password":{"type":"string"},"firstName":{"type":"string","example":"John"},"lastName":{"type":"string","example":"Doe"},"photo":{"$ref":"#/components/schemas/FileDto"},"birthday":{"type":"string","example":"11.09.1992"},"weight":{"type":"number","example":"60","description":"in killograms"},"growth":{"type":"number","example":"172","description":""}},"required":["email","password","firstName","lastName","photo","birthday","weight","growth"]},"Student":{"type":"object","properties":{"id":{"type":"object","example":"1"},"user":{"$ref":"#/components/schemas/User"},"birthday":{"type":"string","example":"11.09.1992"},"weight":{"type":"number","example":"60","description":"in killograms"},"growth":{"type":"number","example":"172","description":""}},"required":["id","user","birthday","weight","growth"]},"InfinityPaginationResponseStudent":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Student"}},"hasNextPage":{"type":"boolean","example":false}},"required":["data","hasNextPage"]},"UpdateStudentDto":{"type":"object","properties":{}},"CreateGymDto":{"type":"object","properties":{"phone":{"type":"string","example":"79516623438"},"schedule":{"example":["10","21"],"type":"array","items":{"type":"string"}},"address":{"type":"string","example":"Moscow, Tverskaya 1"}},"required":["phone","schedule","address"]},"AttachUserToGymDto":{"type":"object","properties":{"userId":{"type":"number","example":"12","description":"userId"},"gymId":{"type":"number","example":"1","description":"gymId"}},"required":["userId","gymId"]},"CreateWorkoutDto":{"type":"object","properties":{"startedAt":{"format":"date-time","type":"string","example":"2024-10-18T13:19:54.252Z"},"endedAt":{"format":"date-time","type":"string","example":1729261194252},"trainerId":{"type":"number","example":"1"},"studentsIds":{"example":[1,2,3],"description":"List of studens ids","type":"array","items":{"type":"string"}},"gymId":{"type":"number","example":"1"}},"required":["startedAt","endedAt","trainerId","studentsIds","gymId"]},"Workout":{"type":"object","properties":{"id":{"type":"number","example":"1"},"stardedAt":{"format":"date-time","type":"string","example":"1"},"endedAt":{"format":"date-time","type":"string","example":"1"},"status":{"type":"array","items":{"type":"string","enum":["CREATED","PENDING","FINISHED","CANCELED"]}},"gym":{"$ref":"#/components/schemas/Gym"},"students":{"type":"array","items":{"$ref":"#/components/schemas/Student"}},"trainer":{"$ref":"#/components/schemas/Trainer"},"exercises":{"type":"array","items":{"$ref":"#/components/schemas/ExerciseStep"}}},"required":["id","stardedAt","endedAt","status","gym","students","trainer","exercises"]},"ExerciseStep":{"type":"object","properties":{"id":{"type":"number","example":"1"},"weight":{"type":"number","example":"80"},"repeat_quantity":{"type":"number","example":"2"},"amount":{"type":"number","example":"40"},"exerciseId":{"type":"number","example":"1"},"workout":{"$ref":"#/components/schemas/Workout"}},"required":["id","weight","repeat_quantity","amount","exerciseId","workout"]},"CreateExerciseDto":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"exerciseGroups":{"example":["legs","core"],"type":"array","items":{"type":"string"}}},"required":["name","description","exerciseGroups"]},"Exercise":{"type":"object","properties":{"id":{"type":"number","example":"1"},"name":{"type":"string","example":"1"},"description":{"type":"string","example":"1"},"video":{"example":"1","allOf":[{"$ref":"#/components/schemas/FileType"}]}},"required":["id","name","description","video"]},"InfinityPaginationResponseExercise":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Exercise"}},"hasNextPage":{"type":"boolean","example":false}},"required":["data","hasNextPage"]},"AttachVideoDto":{"type":"object","properties":{"exerciseId":{"type":"number"},"videoFileId":{"type":"string","example":"1bfa4f2a-6989-4d32-9df6-cce31dfafe8e","description":"uuid from uploaded file"}},"required":["exerciseId","videoFileId"]},"CreateExerciseStepDto":{"type":"object","properties":{"exerciseId":{"type":"number"},"workoutId":{"type":"number"},"weight":{"type":"number","example":"80"},"repeat_quantity":{"type":"number","example":"2"},"amount":{"type":"number","example":"40"}},"required":["exerciseId","workoutId","weight","repeat_quantity","amount"]},"AuthGoogleLoginDto":{"type":"object","properties":{"idToken":{"type":"string","example":"abc","description":"for example from @react-oauth/google"}},"required":["idToken"]}}}}